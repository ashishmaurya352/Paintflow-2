<ion-header [translucent]="true">
  <div class="hader">
    <ion-item>
      <ion-button fill="clear" slot="start" aria-label="Show/hide" (click)="backToRequisitionPage()">
        <ion-icon color="dark" slot="icon-only" name="arrow-back" aria-hidden="true"></ion-icon>
      </ion-button>
      <h3>{{'Pending Requisitions'}}</h3>
      <ion-button fill="clear" slot="end" aria-label="Show/hide" id="popover-button" (click)="openFilter()">
        <ion-icon color="dark" slot="icon-only" name="filter-outline" aria-hidden="true"></ion-icon>
      </ion-button>
    </ion-item>
  </div>
</ion-header>


<ion-content class="ion-padding">
  <div class="time-period">
    <div style="display: flex;justify-content:end">
      <ion-button *ngFor="let period of timePeriods" fill="clear" size="small" [attr.aria-label]="period.label"
        [ngClass]="{'active': selectedPeriod === period.label}" (click)="setActive(period.label)">
        {{ period.label }}
      </ion-button>
      <ion-button *ngIf="selectedPeriod !== 'Custom Date'" fill="clear" size="small" aria-label="Select Custom Date"
        [ngClass]="{'active': selectedPeriod === 'Custom Date'}" (click)="setActive('Custom Date')">
        <ion-icon name="calendar-outline"></ion-icon>
      </ion-button>

      <div *ngIf="selectedPeriod === 'Custom Date'" class="custom-date">
        <div class="date">
          <!-- <ion-label>Start Date</ion-label> -->
          <ion-button [ngClass]="{'active': selectedPeriod === 'Custom Date'}" id="startDate-trigger" shape="round"
            label="Start Date" [fill]="sortByName === 'startDate' ? 'solid' : 'outline'">
            <ion-icon name="calendar"></ion-icon>
            {{startDate | date:'mediumDate':'IST'}}
          </ion-button>
        </div>
        <div>
          <!-- <ion-label>End Date</ion-label> -->
          <ion-button [ngClass]="{'active': selectedPeriod === 'Custom Date'}" shape="round" id="endDate-trigger"
            [fill]="sortByName === 'endDate' ? 'solid' : 'outline'">
            <ion-icon name="calendar"></ion-icon>
            {{endDate | date:'mediumDate':'IST'}}
          </ion-button>
        </div>

        <ion-popover mode="md" trigger="startDate-trigger">
          <ng-template>
            <ion-datetime [value]="startDate" (ionChange)="onStartDateChange($event)" [showDefaultButtons]="true"
              presentation="date"></ion-datetime>
          </ng-template>
        </ion-popover>
        <ion-popover mode="md" trigger="endDate-trigger">
          <ng-template>
            <ion-datetime [min]="startDate" [value]="endDate" (ionChange)="onEndDateChange($event)"
              [showDefaultButtons]="true" presentation="date"></ion-datetime>
          </ng-template>
        </ion-popover>
      </div>
    </div>

  </div>

  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>ReqDate</th>
          <th>SlipNumber</th>
          <th>CO Number</th>
          <th>Person</th>
          <th>Pending SqFt</th>
          <th>Sum of Quantity</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of tableData.data; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{addISTOffset(item.reqDate) | date:'mediumDate'}}</td>
          <td>{{ item.slipNumber }}</td>
          <td>{{ item.coNumber }}</td>
          <td>{{ item.person }}</td>
          <td>{{ item.pendingSqFt }}</td>
          <td>{{ item.sumOfQuantity }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!tableData.data || tableData.data.length === 0" style="display: flex; justify-content: center;">
    <p>No Data </p>
  </div>

</ion-content>